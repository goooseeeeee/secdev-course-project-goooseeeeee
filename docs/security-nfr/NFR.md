# Security & Performance Non-Functional Requirements (NFR)

| ID | Название | Описание | Метрика / Порог | Проверка (чем / где) | Компонент | Приоритет |
|----|-----------|-----------|------------------|------------------------|------------|-------------|
| NFR-01 | Аутентификация пользователей | Все запросы к защищённым эндпоинтам должны требовать JWT-токен с подписью. | Проверка токена < 100 мс, TTL токена = 1 час | Postman / Unit-тест / Auth Middleware | Auth Service |  Высокий |
| NFR-02 | Хэширование паролей | Пароли должны храниться только в виде хэшей Argon2id с солью. | Параметры: m=64MB, t=3, p=1 | Код ревью / Security тест | Auth Service | Высокий |
| NFR-03 | Время ответа API | Среднее время ответа API должно быть ≤ 300 мс, p95 ≤ 500 мс. | p95 latency ≤ 500 мс | JMeter / k6 нагрузочные тесты | Backend API | Высокий |
| NFR-04 | Доступность системы | Сервис wishlist должен быть доступен 99.5% времени в месяц. | SLA ≥ 99.5% uptime | Мониторинг (Prometheus / Grafana) | Все сервисы | Высокий |
| NFR-05 | Безопасность соединений | Все соединения должны использовать HTTPS (TLS ≥ 1.2). | 100% HTTPS / HSTS включён | Security Headers Report / OWASP ZAP | Frontend + Backend | Средний |
| NFR-06 | Обработка ошибок | Процент ошибок HTTP 5xx не превышает 0.1% при нормальной нагрузке. | ≤ 0.1% 5xx | Логи / Grafana / k6 | Backend API | Средний |
| NFR-07 | Управление секретами | Ключи и токены не должны храниться в коде, должны ротироваться каждые 30 дней. | TTL секрета ≤ 30 дней | Vault / Конфигурация / CI-CD | Infrastructure | Средний |
| NFR-08 | Защита от brute-force | При 5 неудачных попытках логина — блокировка на 15 минут. | ≤ 5 попыток / 15 мин блокировки | Unit-тесты / Security тесты | Auth Service | Средний |

---

### Примечания:
- **Meтрика/Порог** — задаёт конкретно измеримый критерий, по которому можно проверить выполнение требования.
- **Проверка** — инструмент, тест или механизм, с помощью которого это требование контролируется.
- **Компонент** — часть системы, где требование реализуется.
- **Приоритет** — показывает критичность (высокий, средний, низкий).
